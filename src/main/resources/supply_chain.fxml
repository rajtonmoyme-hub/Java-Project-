<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.SVGPath?>
<?import java.net.URL?>

<BorderPane prefHeight="900.0" prefWidth="1400.0" styleClass="root-pane" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.foodprice.SupplyChainController">

    <!-- CSS লোড করার সঠিক নিয়ম (এটি না হলে ডিজাইন ভেঙে যায়) -->
    <stylesheets>
        <URL value="@css/sidebar.css" />
        <URL value="@css/supply_chain.css" />
    </stylesheets>

    <!-- LEFT SIDEBAR -->
    <left>
        <fx:include source="sidebar.fxml" />
    </left>

    <!-- CENTER CONTENT -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="main-scroll-pane">
            <content>
                <VBox spacing="25.0">
                    <padding><Insets bottom="40" left="40" right="40" top="40" /></padding>

                    <!-- Header -->
                    <HBox alignment="CENTER_LEFT" spacing="20">
                        <VBox spacing="2">
                            <Label styleClass="page-title" text="সাপ্লাই চেইন" />
                            <Label styleClass="page-subtitle" text="উৎস থেকে ভোক্তা পর্যন্ত ট্র্যাকিং" />
                        </VBox>
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="btnNewEntry" onAction="#openNewEntryDialog" styleClass="btn-new-entry" text="+ নতুন এন্ট্রি" />
                    </HBox>

                    <!-- Summary Stats Cards -->
                    <GridPane hgap="20" vgap="20">
                        <columnConstraints>
                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                            <ColumnConstraints hgrow="ALWAYS" percentWidth="25" />
                        </columnConstraints>

                        <VBox styleClass="stat-card" GridPane.columnIndex="0">
                            <Label styleClass="stat-label" text="মোট পরিমাণ" />
                            <Label fx:id="totalAmountLabel" styleClass="stat-value-dark" text="0 MT" />
                        </VBox>
                        <VBox styleClass="stat-card" GridPane.columnIndex="1">
                            <Label styleClass="stat-label" text="গড় দক্ষতা" />
                            <Label fx:id="avgEfficiencyLabel" styleClass="stat-value-green" text="0.0%" />
                        </VBox>
                        <VBox styleClass="stat-card" GridPane.columnIndex="2">
                            <Label styleClass="stat-label" text="গড় অপচয়" />
                            <Label fx:id="avgWasteLabel" styleClass="stat-value-orange" text="0.0%" />
                        </VBox>
                        <VBox styleClass="stat-card" GridPane.columnIndex="3">
                            <Label styleClass="stat-label" text="সাপ্লাই শক" />
                            <Label fx:id="supplyShockLabel" styleClass="stat-value-dark" text="0" />
                        </VBox>
                    </GridPane>

                    <!-- Filter -->
                    <HBox alignment="CENTER_LEFT">
                        <ComboBox fx:id="productFilterCombo" onAction="#handleProductFilterChange" onShowing="#handleProductFilterShowing" prefWidth="250.0" promptText="সকল পণ্য" styleClass="product-filter" />
                    </HBox>
                    <!-- Supply Chain Flow Section -->
                    <VBox spacing="18" styleClass="flow-card">
                        <HBox alignment="CENTER_LEFT">
                            <VBox spacing="4">
                                <Label styleClass="section-title" text="সাপ্লাই চেইন ফ্লো" />
                                <Label styleClass="flow-caption" text="প্রতিটি ধাপে এন্ট্রি এবং মোট ফ্লো-এর শেয়ার" />
                            </VBox>
                            <Region HBox.hgrow="ALWAYS" />
                            <Label styleClass="flow-chip" text="Live Tracking" />
                        </HBox>

                        <HBox alignment="CENTER" spacing="12">
                            <VBox alignment="CENTER" spacing="8" styleClass="flow-node-card">
                                <StackPane styleClass="flow-icon-bg, bg-green">
                                    <SVGPath content="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm4 8H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm4 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V9h2v2zm4 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V9h2v2z" fill="white" scaleX="1.1" scaleY="1.1" />
                                </StackPane>
                                <Label styleClass="flow-label" text="উৎস" />
                                <Label fx:id="sourceCountLabel" styleClass="flow-sublabel" text="0 এন্ট্রি" />
                                <Label fx:id="sourceShareLabel" styleClass="flow-share" text="0.0%" />
                            </VBox>

                            <Region styleClass="flow-connector" />

                            <VBox alignment="CENTER" spacing="8" styleClass="flow-node-card">
                                <StackPane styleClass="flow-icon-bg, bg-blue">
                                    <SVGPath content="M20 8h-3V4H3v4H2v2h1v10h18V10h1V8zm-10 8H8v-2h2v2zm0-4H8v-2h2v2zm4 4h-2v-2h2v2zm0-4h-2v-2h2v2zm4 4h-2v-2h2v2zm0-4h-2v-2h2v2z" fill="white" scaleX="1.1" scaleY="1.1" />
                                </StackPane>
                                <Label styleClass="flow-label" text="পরিবহন" />
                                <Label fx:id="transportCountLabel" styleClass="flow-sublabel" text="0 এন্ট্রি" />
                                <Label fx:id="transportShareLabel" styleClass="flow-share" text="0.0%" />
                            </VBox>

                            <Region styleClass="flow-connector" />

                            <VBox alignment="CENTER" spacing="8" styleClass="flow-node-card">
                                <StackPane styleClass="flow-icon-bg, bg-orange">
                                    <SVGPath content="M12 3L2 12h3v8h14v-8h3L12 3zm0 4.84l4.5 4.05V18H7.5v-6.11L12 7.84z" fill="white" scaleX="1.1" scaleY="1.1" />
                                </StackPane>
                                <Label styleClass="flow-label" text="গুদাম" />
                                <Label fx:id="warehouseCountLabel" styleClass="flow-sublabel" text="0 এন্ট্রি" />
                                <Label fx:id="warehouseShareLabel" styleClass="flow-share" text="0.0%" />
                            </VBox>

                            <Region styleClass="flow-connector" />

                            <VBox alignment="CENTER" spacing="8" styleClass="flow-node-card">
                                <StackPane styleClass="flow-icon-bg, bg-purple">
                                    <SVGPath content="M18.6 6.62c-.51-.22-1.09-.39-1.74-.5-1.2-.2-2.86-.2-4.86-.2s-3.66 0-4.86.2c-.65.11-1.23.28-1.74.5C4.22 7.14 4 8.04 4 9.12V15c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V9.12c0-1.08-.22-1.98-1.4-2.5zM12 15c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" fill="white" scaleX="1.1" scaleY="1.1" />
                                </StackPane>
                                <Label styleClass="flow-label" text="পাইকারি" />
                                <Label fx:id="wholesaleCountLabel" styleClass="flow-sublabel" text="0 এন্ট্রি" />
                                <Label fx:id="wholesaleShareLabel" styleClass="flow-share" text="0.0%" />
                            </VBox>

                            <Region styleClass="flow-connector" />

                            <VBox alignment="CENTER" spacing="8" styleClass="flow-node-card">
                                <StackPane styleClass="flow-icon-bg, bg-pink">
                                    <SVGPath content="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z" fill="white" scaleX="1.1" scaleY="1.1" />
                                </StackPane>
                                <Label styleClass="flow-label" text="খুচরা" />
                                <Label fx:id="retailCountLabel" styleClass="flow-sublabel" text="0 এন্ট্রি" />
                                <Label fx:id="retailShareLabel" styleClass="flow-share" text="0.0%" />
                            </VBox>
                        </HBox>
                    </VBox>
                    <!-- Entries List Area -->
                    <VBox fx:id="entryListContainer" spacing="15" />

                    <!-- Completed History -->
                    <VBox spacing="14" styleClass="history-card">
                        <HBox alignment="CENTER_LEFT">
                            <Label styleClass="section-title" text="সম্পন্ন সাপ্লাই ইতিহাস" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Label fx:id="historyCountLabel" styleClass="history-count-chip" text="0 টি সম্পন্ন" />
                        </HBox>
                        <VBox fx:id="historyListContainer" spacing="10" />
                    </VBox>

                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>

